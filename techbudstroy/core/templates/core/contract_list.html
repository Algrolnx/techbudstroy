{% extends 'core/base.html' %}
{% block title %}Договори - ТехБуд-Строй{% endblock %}
{% block header %}Фінанси та Договори{% endblock %}
{% block content %}
<div class="card card-custom p-3">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">Реєстр договорів</h5>
        <a href="/admin/core/contract/add/" class="btn btn-sm btn-warning text-white">+ Новий</a>
    </div>
    <table class="table table-hover table-sm">
        <thead>
            <tr>
                <th>№</th>
                <th>Замовник</th>
                <th>Об'єкт</th>
                <th>Сума</th>
                <th>Статус</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for contract in contracts %}
            <tr>
                <td><strong>{{ contract.contract_number }}</strong></td>
                <td>{{ contract.client.name }}</td>
                <td>{{ contract.construction_object.title }}</td>
                <td>{{ contract.total_amount }} грн</td>
                <td>
                    {% if contract.status == 'Active' %}<span class="badge bg-success">Активний</span>
                    {% elif contract.status == 'Completed' %}<span class="badge bg-secondary">Завершено</span>
                    {% else %}<span class="badge bg-warning text-dark">{{ contract.status }}</span>
                    {% endif %}
                </td>
                <td><a href="{% url 'admin:core_contract_change' contract.id %}"
                        class="btn btn-sm btn-outline-primary">Ред.</a></td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center text-muted py-3">Договорів не знайдено.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}